

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>编码约定 &mdash; Explore Flask 1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Explore Flask 1.0 documentation" href="index.html"/>
        <link rel="next" title="环境" href="environment.html"/>
        <link rel="prev" title="前言" href="preface.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Explore Flask</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="preface.html">前言</a><ul>
<li class="toctree-l2"><a class="reference internal" href="preface.html#id2">假设</a></li>
<li class="toctree-l2"><a class="reference internal" href="preface.html#id10">动态文件</a></li>
<li class="toctree-l2"><a class="reference internal" href="preface.html#id11">本书使用的约定</a></li>
<li class="toctree-l2"><a class="reference internal" href="preface.html#id15">彩蛋</a></li>
<li class="toctree-l2"><a class="reference internal" href="preface.html#id16">摘要</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">编码约定</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pep">让我们来个 PEP 动员！</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">相对导入</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">摘要</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="environment.html">环境</a><ul>
<li class="toctree-l2"><a class="reference internal" href="environment.html#virtualenv">使用 virtualenv 管理你的环境</a></li>
<li class="toctree-l2"><a class="reference internal" href="environment.html#id6">版本控制</a></li>
<li class="toctree-l2"><a class="reference internal" href="environment.html#id8">调试</a></li>
<li class="toctree-l2"><a class="reference internal" href="environment.html#id12">摘要</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="organizing.html">组织你的项目</a><ul>
<li class="toctree-l2"><a class="reference internal" href="organizing.html#id2">定义</a></li>
<li class="toctree-l2"><a class="reference internal" href="organizing.html#id4">组织模式</a></li>
<li class="toctree-l2"><a class="reference internal" href="organizing.html#id10">摘要</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">配置</a><ul>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#id2">简单的例子</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#id3">实例文件夹</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#id8">基于环境变量配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html#id9">摘要</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="views.html">视图和路由的高级模式</a><ul>
<li class="toctree-l2"><a class="reference internal" href="views.html#id2">视图装饰器</a></li>
<li class="toctree-l2"><a class="reference internal" href="views.html#url-converters">URL 转换器(converters)</a></li>
<li class="toctree-l2"><a class="reference internal" href="views.html#id9">摘要</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="blueprints.html">蓝图</a><ul>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#id2">什么是蓝图？</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#id3">为什么要使用蓝图？</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#id5">你把它们放哪里？</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#id9">你如何使用它们？</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#id12">使用蓝图重构小的应用程序</a></li>
<li class="toctree-l2"><a class="reference internal" href="blueprints.html#id18">摘要</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="templates.html">模板</a><ul>
<li class="toctree-l2"><a class="reference internal" href="templates.html#jinja">Jinja 快速入门</a></li>
<li class="toctree-l2"><a class="reference internal" href="templates.html#id3">如何组织模板</a></li>
<li class="toctree-l2"><a class="reference internal" href="templates.html#id4">继承</a></li>
<li class="toctree-l2"><a class="reference internal" href="templates.html#id6">创建宏</a></li>
<li class="toctree-l2"><a class="reference internal" href="templates.html#id9">自定义过滤器</a></li>
<li class="toctree-l2"><a class="reference internal" href="templates.html#id11">摘要</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="static.html">静态文件</a><ul>
<li class="toctree-l2"><a class="reference internal" href="static.html#id2">组织你的静态文件</a></li>
<li class="toctree-l2"><a class="reference internal" href="static.html#flask-assets">使用 Flask-Assets 管理静态资源</a></li>
<li class="toctree-l2"><a class="reference internal" href="static.html#id7">摘要</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="storing.html">存储数据</a><ul>
<li class="toctree-l2"><a class="reference internal" href="storing.html#sqlalchemy">SQLAlchemy</a></li>
<li class="toctree-l2"><a class="reference internal" href="storing.html#id5">摘要</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="forms.html">处理表单</a><ul>
<li class="toctree-l2"><a class="reference internal" href="forms.html#flask-wtf">Flask-WTF</a></li>
<li class="toctree-l2"><a class="reference internal" href="forms.html#id9">摘要</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="users.html">处理用户的模式</a><ul>
<li class="toctree-l2"><a class="reference internal" href="users.html#id2">确认电子邮箱</a></li>
<li class="toctree-l2"><a class="reference internal" href="users.html#id3">存储密码</a></li>
<li class="toctree-l2"><a class="reference internal" href="users.html#id5">认证</a></li>
<li class="toctree-l2"><a class="reference internal" href="users.html#id7">忘记密码</a></li>
<li class="toctree-l2"><a class="reference internal" href="users.html#id8">摘要</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">部署</a><ul>
<li class="toctree-l2"><a class="reference internal" href="deployment.html#id2">主机</a></li>
<li class="toctree-l2"><a class="reference internal" href="deployment.html#id3">部署方式</a></li>
<li class="toctree-l2"><a class="reference internal" href="deployment.html#id7">摘要</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="conclusion.html">结尾</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Explore Flask</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>编码约定</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/conventions.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="id1">
<h1>编码约定<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<a class="reference internal image-reference" href="_images/conventions.png"><img alt="Coding conventions" src="_images/conventions.png" style="height: 100pt;" /></a>
<p>在 Python 社区有一些指导你格式化代码的约定。如果你使用 Python 进行了一段时间开发，那么你可能已经熟悉了这些约定。我会继续让事情简单些并且留下一些 URLs，如果以前你还没有碰过这些话题的话你能够在这里 URLs 中找到更多的信息。</p>
<div class="section" id="pep">
<h2>让我们来个 PEP 动员！<a class="headerlink" href="#pep" title="Permalink to this headline">¶</a></h2>
<p><strong>PEP</strong> 是“Python 增强倡议”，这些倡议是被索引以及托管在 python.org。在索引中，PEPs 被分成了几类，包含 meta-PEPs，这是比起技术更具有信息性。另一方面，技术的 PEPs 通常是用来描述像改进 Python 内部运行机制（一般是改进或者优化等等）。</p>
<p>这里有几个比较常用的 PEPs，像 PEP 8 以及 PEP 257，它们的目的是指导我们编写代码的方式。PEP 8 包含编码风格的指南。PEP 257 包含文档字符串指南，普遍的可接受的编写代码文档的方法。</p>
<div class="section" id="pep-8-python">
<h3>PEP 8: Python 代码的风格指南<a class="headerlink" href="#pep-8-python" title="Permalink to this headline">¶</a></h3>
<p>PEP 8 是官方的 Python 代码风格指南。我建议你们阅读它并且在你的 Flask 项目中（以及你所有其它的 Python 代码）使用建议规范。你的代码会更加平易近人的，当开始有越来越多的代码行的时候。PEP 8 中的建议都是关于代码更具有可读性的。另外，如果你的项目将是开源的话，潜在的贡献者可能会期待或者愉快地使用 PEP 8 风格编写代码。</p>
<p>一个特别重要的建议就是每个缩进使用 4 个空格。缩进不使用制表符（Tab）。如果你违反这个约定（惯例）的话在项目进行切换的时候会给其他的开发人员带来负担。在任何语言中诸如此类的矛盾是很痛苦，但是空格符在 Python 中尤为重要，因此在真正的制表符（Tab）和空格符之间切换的话会导致许多问题，这对于调试是一个很大的麻烦。</p>
</div>
<div class="section" id="pep-257">
<h3>PEP 257: 文档字符串约定<a class="headerlink" href="#pep-257" title="Permalink to this headline">¶</a></h3>
<p>PEP 257 涉及到另一个 Python 标准：<strong>文档字符串</strong>。你可以在 PEP 257 里阅读定义和建议，但是这里只有一个示例，这个示例给你一个文档字符串看起来像什么的概念：</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">launch_rocket</span><span class="p">():</span>
   <span class="sd">&quot;&quot;&quot;Main launch sequence director.</span>

<span class="sd">   Locks seatbelts, initiates radio and fires engines.</span>
<span class="sd">   &quot;&quot;&quot;</span>
   <span class="c"># [...]</span>
</pre></div>
</td></tr></table></div>
<p>这种文档字符串可以使用软件比如 Sphinx 生成 HTML，PDF 以及其它格式的文本文件。它们会让人更容易地理解你的代码。</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li><a class="reference external" href="http://legacy.python.org/dev/peps/pep-0008/">PEP 8</a></li>
<li><a class="reference external" href="http://legacy.python.org/dev/peps/pep-0257/">PEP 257</a></li>
<li><a class="reference external" href="http://sphinx-doc.org/">Sphinx</a>，由 Flask 相同的团队创建的文档生成器</li>
</ul>
</div>
</div>
</div>
<div class="section" id="id3">
<h2>相对导入<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>在开发 Flask 应用的时候，相对导入可以使得生活变得更加美好一些。前提是很简单的。比方说，我们想从 <em>myapp/models.py</em> 模块中导入 <code class="docutils literal"><span class="pre">User</span></code> 模型。你可能会考虑使用应用程序的包名，比如，<code class="docutils literal"><span class="pre">myapp.models</span></code>。使用相对导入，你应该指明相对于源文件的目标模块的位置。要做到这一点，我们使用点符号（.），第一个点符号（.）表示当前目录，每一个随后的点符号（.）表示下一个父目录。下面示例展示了绝对导入和相对导入之间的不同。</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="c"># myapp/views.py</span>

<span class="c"># An absolute import gives us the User model</span>
<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">User</span>

<span class="c"># A relative import does the same thing</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">User</span>
</pre></div>
</td></tr></table></div>
<p>这种方法的优点就是软件包变得更加模块化。现在你可以重命名你的包并且在其它项目中不需要更新硬编码的导入语句而可以重用模块。</p>
<p>在我的研究中我偶遇了一条 Tweet，它能说明相对导入的好处。</p>
<blockquote>
<div><p>刚刚不得不重命名了我们整个包。花费 1 秒，包的相对导入真酷！</p>
<p class="attribution">&mdash;<a class="reference external" href="https://twitter.com/dabeaz/status/372059407711887360">David Beazley, &#64;dabeaz</a></p>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">你可以从 <a class="reference external" href="http://www.python.org/dev/peps/pep-0328/#guido-s-decision">PEP 328</a> 这一章节中阅读一些关于相对导入的语法。</p>
</div>
</div>
<div class="section" id="id4">
<h2>摘要<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>尽量遵循 PEP 8 中规定的编码风格约定。</li>
<li>尝试用定义在 PEP 257 中的文档字符串来记录你的应用程序。</li>
<li>使用相对导入来导入你的应用程序的内部模块。</li>
</ul>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="environment.html" class="btn btn-neutral float-right" title="环境"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="preface.html" class="btn btn-neutral" title="前言"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Robert Picard.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50579609-1', 'exploreflask.com');
  ga('send', 'pageview');

</script>


</body>
</html>